{% extends "base_layout.html" %}

{% block title %}0001 - ×ª×¤×¨×™×˜ ×¨××©×™{% endblock %}

{# ×›××Ÿ ×”×ª×™×§×•×Ÿ: ×©×™××•×© ×‘×‘×œ×•×§ ×›×“×™ ×©×”-Layout ×™×–×”×” ××ª ×©× ×”×“×£ #}
{% block active_ctx %}INDEX{% endblock %}

{% block content %}
<div class="main-menu-container">
    <h2 style="text-align: center; color: var(--header-bg); margin-bottom: 30px; font-weight: 300; font-size: 2em;">
        ×‘×—×¨ ××–×•×¨ ×œ× ×™×”×•×œ
    </h2>

    <div class="button-grid">
        <button id="nav-status" class="action-button" onclick="navigateTo('/status_boys.html', 'NAV_STATUS')">
            ğŸ“Š ×¡×˜×˜×•×¡ ××¢×¨×›×•×ª
        </button>

        <button id="nav-control" class="action-button" onclick="navigateTo('/nav_control.html', 'NAV_CONTROL')">
            ğŸ•¹ï¸ ×‘×§×¨×ª ××–×•×¨×™×
        </button>

        <button id="nav-settings" class="action-button" onclick="navigateTo('/nav_settings.html', 'NAV_SETTINGS')">
            âš™ï¸ ×”×’×“×¨×•×ª ××¢×¨×›×ª
        </button>
    </div>
</div>

<style>
    /* ×¢×™×¦×•×‘ ××©×œ×™× ×œ×›×¤×ª×•×¨×™× ×—×¡×•××™× ×‘×“×£ ×”×‘×™×ª */
    .action-button.disabled-link {
        opacity: 0.4;
        pointer-events: none; 
        filter: grayscale(1);
        cursor: not-allowed;
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
    /**
     * ×¤×•× ×§×¦×™×” ×©×‘×•×“×§×ª ××ª ××¦×‘ ×”×—×™×‘×•×¨ ×œ××œ×™ (×“×¨×š Class ×©×œ ×›×¤×ª×•×¨ ×”-USER)
     * ×•××¢×“×›× ×ª ××ª ×–××™× ×•×ª ×”×›×¤×ª×•×¨×™× ×‘×“×£
     */
    function syncNavigationWithEli() {
        const userBtn = document.getElementById('user-login-btn');
        const navButtons = {
            status: document.getElementById('nav-status'),
            control: document.getElementById('nav-control'),
            settings: document.getElementById('nav-settings')
        };
        
        if (!userBtn) return;

        // ×”×‘×“×™×§×” ××¡×ª××›×ª ×¢×œ ×”-Class ×©-updateLoginStatus ×‘-Base ××•×¡×™×£/××¡×™×¨
        const isConnected = userBtn.classList.contains('eli-connected');

        if (isConnected) {
            // ×× ××—×•×‘×¨ - ××©×—×¨×¨×™× ××ª ×›×œ ×”××¤×©×¨×•×™×•×ª
            if (navButtons.control) navButtons.control.classList.remove('disabled-link');
            if (navButtons.settings) navButtons.settings.classList.remove('disabled-link');
        } else {
            // ×× ×× ×•×ª×§ - × ×•×¢×œ×™× ×¨×§ ××ª ×©×œ×™×˜×” ×•×”×’×“×¨×•×ª (×¡×˜×˜×•×¡ ×ª××™×“ ×–××™×Ÿ ×œ×§×¨×™××”)
            if (navButtons.control) navButtons.control.classList.add('disabled-link');
            if (navButtons.settings) navButtons.settings.classList.add('disabled-link');
        }
    }

    // ×”×¤×¢×œ×” ×•×¨×™×¢× ×•×Ÿ ×©×œ ××¦×‘ ×”×›×¤×ª×•×¨×™×
    document.addEventListener('DOMContentLoaded', () => {
        syncNavigationWithEli();
        // ×‘×“×™×§×” ×›×œ 2 ×©× ×™×•×ª ×›×“×™ ×œ×”×’×™×‘ ××”×¨ ×œ×©×™× ×•×™×™ ×¡×˜×˜×•×¡
        setInterval(syncNavigationWithEli, 2000); 
    });
</script>
{% endblock %}