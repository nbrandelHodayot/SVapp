{% extends "base_layout.html" %}

{% block title %}0001 - ×ª×¤×¨×™×˜ ×¨××©×™{% endblock %}

{% block page_name %}×ª×¤×¨×™×˜ ×¨××©×™{% endblock %}

{% block content %}
<div class="main-menu-container">
    <h2 style="text-align: center; color: var(--header-bg); margin-bottom: 30px; font-weight: 300; font-size: 2em;">
        ×‘×—×¨ ××–×•×¨ ×œ× ×™×”×•×œ
    </h2>

    <div class="button-grid">
        <button id="nav-status" class="action-button" onclick="navigateTo('/status_boys.html', 'NAV_STATUS')">
            ğŸ“Š ×¡×˜×˜×•×¡ ××¢×¨×›×•×ª
        </button>

        <button id="nav-control" class="action-button" onclick="navigateTo('/nav_control.html', 'NAV_CONTROL')">
            ğŸ•¹ï¸ ×‘×§×¨×ª ××–×•×¨×™×
        </button>

        <button id="nav-settings" class="action-button" onclick="navigateTo('/nav_settings.html', 'NAV_SETTINGS')">
            âš™ï¸ ×”×’×“×¨×•×ª ××¢×¨×›×ª
        </button>
    </div>
</div>

<style>
    /* ×¢×™×¦×•×‘ ×œ×›×¤×ª×•×¨×™× ×—×¡×•××™× ×›×©××œ×™ ×× ×•×ª×§ */
    .action-button.disabled-link {
        opacity: 0.4;
        pointer-events: none; 
        filter: grayscale(1);
        cursor: not-allowed;
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
    /**
     * ×¤×•× ×§×¦×™×™×ª Gatekeeper - × ×•×¢×œ×ª/××©×—×¨×¨×ª ×›×¤×ª×•×¨×™× ×œ×¤×™ ×”-Header
     */
    function syncNavigationWithEli() {
        const userBtn = document.getElementById('user-login-btn');
        const actionButtons = document.querySelectorAll('.action-button');
        
        if (!userBtn) return;

        // ×× ×”×›×¤×ª×•×¨ ×‘-Header ××¦×™×’ 'Eli' ×•×™×© ×œ×• ××ª ×”×§×œ××¡ ×”×™×¨×•×§
        if (userBtn.classList.contains('eli-connected')) {
            actionButtons.forEach(btn => btn.classList.remove('disabled-link'));
        } else {
            actionButtons.forEach(btn => btn.classList.add('disabled-link'));
        }
    }

    // ×”×¤×¢×œ×” ×•×¡× ×›×¨×•×Ÿ
    document.addEventListener('DOMContentLoaded', () => {
        syncNavigationWithEli();
        // ×‘×“×™×§×” ×›×œ 2 ×©× ×™×•×ª ×× ×”×¡×˜×˜×•×¡ ×‘-Header ×”×©×ª× ×”
        setInterval(syncNavigationWithEli, 2000);
    });

    /*******************************************************
     * ×˜×™×¤×•×œ ×‘-Timeout ×•×—×–×¨×” ×œ×‘×§×¨
     * ×”-base_layout ×›×‘×¨ ××›×™×œ ×œ×•×’×™×§×ª ×—×•×¡×¨ ×¤×¢×™×œ×•×ª.
     * ×›×™×•×•×Ÿ ×©×× ×—× ×• ×‘×“×£ ×”×‘×™×ª (back_action=MAIN), ×”-layout ×™×©×œ×— 
     * ×¤×§×•×“×ª 'BACK_MAIN' ×œ×‘×§×¨ ×œ××—×¨ 5 ×“×§×•×ª.
     *******************************************************/
</script>

<script>
    function syncNavigationWithEli() {
        const userBtn = document.getElementById('user-login-btn');
        // × ×‘×—×¨ ×¨×§ ××ª ×”×›×¤×ª×•×¨×™× ×©×“×•×¨×©×™× ×—×¡×™××” ×œ×¤×™ ×”-ID ×©×œ×”×
        const controlBtn = document.getElementById('nav-control');
        const settingsBtn = document.getElementById('nav-settings');
        
        if (!userBtn || !controlBtn || !settingsBtn) return;

        // ×‘×“×™×§×” ×× ×”××©×ª××© Eli ××—×•×‘×¨
        const isConnected = userBtn.classList.contains('eli-connected');

        if (isConnected) {
            controlBtn.classList.remove('disabled-link');
            settingsBtn.classList.remove('disabled-link');
        } else {
            controlBtn.classList.add('disabled-link');
            settingsBtn.classList.add('disabled-link');
        }
        // ×›×¤×ª×•×¨ nav-status ×œ× × ××¦× ×‘×¨×©×™××” ×•×œ×›×Ÿ ×™×™×©××¨ ×ª××™×“ ×¤×¢×™×œ
    }

    document.addEventListener('DOMContentLoaded', () => {
        syncNavigationWithEli();
        setInterval(syncNavigationWithEli, 2000); // ×‘×“×™×§×” ×›×œ 2 ×©× ×™×•×ª
    });
</script>
{% endblock %}